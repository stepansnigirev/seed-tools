<html>
<head>
  <title>Double seed</title>
  <link rel="stylesheet" href="dark.css">
</head>
<body>
  <h1>Double mnemonic generator</h1>
  <p>
    24-word mnemonic generated by this tool consists
    of two valid 12-word mnemonics.<br>
    So you can use both, or combined. Have fun and make everyone confused :)
  </p>
  <h2>Mnemonic will be here:</h2>
  <h3 id="mnemonic" style="height: 4em">Click "Generate"</h3>
  <button id="generate">Generate</button>

<script type="module">
import init, { double_mnemonic_from_entropy } from './pkg/seed_tools.js';

window.seed_tools = {
  init,
  double_mnemonic_from_entropy,
}
const btn = document.getElementById("generate");
const output = document.getElementById("mnemonic");
const randomBytes = new Uint8Array(64);

function split(mnemonic) {
  const words = mnemonic.trim().split(/\s+/);
  
  if (words.length !== 24) {
    throw new Error("The input sentence must contain exactly 24 words.");
  }

  const first = words.slice(0, 12);
  const second = words.slice(12, 24);

  return [first.join(" "), second.join(" ")];
}

async function main(){
  await seed_tools.init();
  btn.addEventListener("click", ()=>{
    // generate random hex-string using
    // browser's crypto engine
    window.crypto.getRandomValues(randomBytes);
    let randomString = Array.from(randomBytes)
                            .map((byte) => byte.toString(16).padStart(2, "0"))
                            .join("");
    let mnemonic = window.seed_tools.double_mnemonic_from_entropy(randomString);
    let [first, second] = split(mnemonic);
    output.innerHTML = `${first}<br>${second}`;
  })
};
main();
</script>

</body>
</html>
  
